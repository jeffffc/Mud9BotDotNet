<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mud9Bot äº¤é€šåŠ©æ‰‹</title>
    <!-- Telegram Mini App SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: var(--tg-theme-bg-color, #ffffff); color: var(--tg-theme-text-color, #222); overflow-x: hidden; }
        .service-card:active { transform: scale(0.96); }
    </style>
</head>
<body class="antialiased select-none h-screen flex flex-col">
<!-- Overlay Loading State for Auto-Routing -->
<div id="loadingOverlay" class="hidden absolute inset-0 z-[100] bg-white flex flex-col items-center justify-center">
    <div class="inline-block animate-spin rounded-full h-10 w-10 border-4 border-blue-500 border-t-transparent"></div>
    <p class="mt-4 text-gray-500 font-bold tracking-widest text-sm">è¼‰å…¥ä¸­...</p>
</div>

<!-- Header -->
<header id="appHeader" class="bg-white border-b border-gray-100 p-4 flex items-center justify-center sticky top-0 z-[60] shadow-sm">
    <div class="flex items-center space-x-2">
        <span class="text-2xl">ğŸ§­</span>
        <span class="font-black text-gray-800 tracking-tight text-xl">Mud9Bot <span class="text-blue-500">Transport</span></span>
    </div>
</header>

<!-- Main Content Menu -->
<div class="flex-1 flex flex-col p-6 justify-center max-w-md mx-auto w-full gap-5">
    <div class="text-center mb-2">
        <h2 class="font-black text-gray-400 text-xs tracking-widest uppercase">è«‹é¸æ“‡ä½ æƒ³æŸ¥é–±å˜…äº¤é€šå·¥å…·</h2>
    </div>

    <!-- Bus Card -->
    <div onclick="window.location.href='/bus'" class="service-card cursor-pointer bg-white border border-gray-100 rounded-3xl p-6 flex items-center shadow-[0_4px_20px_rgba(0,0,0,0.04)] transition-transform duration-200">
        <div class="w-16 h-16 rounded-2xl bg-blue-50 flex items-center justify-center text-3xl shadow-sm shrink-0">ğŸšŒ</div>
        <div class="ml-5 flex-1">
            <h3 class="text-2xl font-black text-gray-800 tracking-wide">å·´å£«</h3>
            <p class="text-[10px] font-bold text-gray-400 mt-1 uppercase tracking-wide">ä¹å·´ â€¢ åŸå·´ â€¢ é¾é‹ â€¢ å¶¼å·´ â€¢ æ¸¯éµå·´å£«</p>
        </div>
        <div class="ml-auto text-gray-300">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M9 5l7 7-7 7" /></svg>
        </div>
    </div>

    <!-- Minibus Card -->
    <div onclick="window.location.href='/minibus'" class="service-card cursor-pointer bg-white border border-gray-100 rounded-3xl p-6 flex items-center shadow-[0_4px_20px_rgba(0,0,0,0.04)] transition-transform duration-200">
        <div class="w-16 h-16 rounded-2xl bg-green-50 flex items-center justify-center text-3xl shadow-sm shrink-0">ğŸš</div>
        <div class="ml-5 flex-1">
            <h3 class="text-2xl font-black text-gray-800 tracking-wide">å°å·´</h3>
            <p class="text-[10px] font-bold text-gray-400 mt-1 uppercase tracking-wide">ç¶ è‰²å°ˆç·šå°å·´ GMB</p>
        </div>
        <div class="ml-auto text-gray-300">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M9 5l7 7-7 7" /></svg>
        </div>
    </div>

    <!-- MTR Card -->
    <div onclick="window.location.href='/mtr'" class="service-card cursor-pointer bg-white border border-gray-100 rounded-3xl p-6 flex items-center shadow-[0_4px_20px_rgba(0,0,0,0.04)] transition-transform duration-200">
        <div class="w-16 h-16 rounded-2xl bg-red-50 flex items-center justify-center text-3xl shadow-sm shrink-0">ğŸš‡</div>
        <div class="ml-5 flex-1">
            <h3 class="text-2xl font-black text-gray-800 tracking-wide">æ¸¯éµ</h3>
            <p class="text-[10px] font-bold text-gray-400 mt-1 uppercase tracking-wide">MTR Next Train</p>
        </div>
        <div class="ml-auto text-gray-300">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M9 5l7 7-7 7" /></svg>
        </div>
    </div>
</div>

<script>
    const tg = window.Telegram.WebApp;
    tg.ready();
    tg.expand();

    // 1. Check for Telegram startapp routing params
    // If a user clicks t.me/Mud9Bot/transport?startapp=bus, this routes them instantly.
    const startParam = tg.initDataUnsafe?.start_param;

    if (startParam === 'bus') {
        document.getElementById('loadingOverlay').classList.remove('hidden');
        window.location.replace('/bus');
    } else if (startParam === 'mtr') {
        document.getElementById('loadingOverlay').classList.remove('hidden');
        window.location.replace('/mtr');
    }
    else if (startParam === 'minibus' || startParam === 'gmb') {
        document.getElementById('loadingOverlay').classList.remove('hidden');
        window.location.replace('/minibus');
    }
</script>
</body>
</html>